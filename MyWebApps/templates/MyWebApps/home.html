{% extends 'MyWebApps/base.html' %}

{% block title %}EMPLEOYA - Tu Portal de Empleo{% endblock %}

{% block content %}
<!-- Hero Section -->
<section style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: var(--white); padding: 4rem 2rem; text-align: center;">
    <div class="container">
        <h1 style="font-size: 3rem; margin-bottom: 1rem;">Encuentra tu Trabajo Ideal</h1>
        <p style="font-size: 1.25rem; opacity: 0.9; margin-bottom: 2rem;">
            Miles de ofertas de trabajo esper√°ndote
        </p>

        <!-- B√∫squeda r√°pida -->
        <form action="{% url 'ofertas_lista' %}" method="GET" style="max-width: 800px; margin: 0 auto; display: flex; gap: 1rem; background: var(--white); padding: 0.5rem; border-radius: 0.5rem;">
            <input
                type="text"
                name="search"
                placeholder="Buscar empleos por t√≠tulo, empresa o palabra clave..."
                style="flex: 1; padding: 0.75rem; border: none; outline: none; color: var(--text);"
            >
            <button type="submit" class="btn btn-primary" style="white-space: nowrap;">
                Buscar Empleo
            </button>
        </form>
    </div>
</section>

<!-- Estad√≠sticas -->
<div class="container" style="margin-top: -2rem;">
    <div class="stats">
        <div class="stat-card">
            <span class="stat-number">{{ stats.total_ofertas }}</span>
            <span class="stat-label">Ofertas Activas</span>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary), #059669);">
            <span class="stat-number">{{ stats.total_empresas }}</span>
            <span class="stat-label">Empresas Registradas</span>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, var(--warning), #d97706);">
            <span class="stat-number">{{ stats.total_postulantes }}</span>
            <span class="stat-label">Postulantes</span>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
            <span class="stat-number">{{ stats.total_categorias }}</span>
            <span class="stat-label">Categor√≠as</span>
        </div>
    </div>
</div>

<!-- Categor√≠as -->
<div class="container">
    <h2 class="text-center mb-3">Categor√≠as Populares</h2>

    <div class="grid grid-2">
        {% for categoria in categorias %}
        <a href="{% url 'ofertas_lista' %}?categoria={{ categoria.id }}" style="text-decoration: none; color: inherit;">
            <div class="card" style="transition: transform 0.3s, box-shadow 0.3s;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="font-size: 2.5rem; color: var(--primary);">
                        {% if categoria.icono %}{{ categoria.icono }}{% else %}üìÅ{% endif %}
                    </div>
                    <div style="flex: 1;">
                        <h3 style="margin-bottom: 0.25rem;">{{ categoria.nombre }}</h3>
                        <p class="text-muted" style="margin: 0;">{{ categoria.num_ofertas }} ofertas disponibles</p>
                    </div>
                    <span class="badge badge-primary">Ver ofertas</span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>

    <div class="text-center mt-3">
        <a href="{% url 'ofertas_lista' %}" class="btn btn-outline">Ver Todas las Categor√≠as</a>
    </div>
</div>

<!-- Ofertas Destacadas -->
<div class="container">
    <h2 class="text-center mb-3">Ofertas Destacadas</h2>

    <div class="grid grid-3">
        {% for oferta in ofertas_destacadas %}
        <div class="card">
            <div style="margin-bottom: 1rem;">
                <h3 style="margin-bottom: 0.5rem; color: var(--primary);">
                    <a href="{% url 'oferta_detalle' oferta.id %}" style="color: inherit; text-decoration: none;">
                        {{ oferta.titulo }}
                    </a>
                </h3>
                <p class="text-muted" style="margin: 0;">{{ oferta.empresa.nombre_empresa }}</p>
            </div>

            <div style="margin-bottom: 1rem;">
                <span class="badge badge-primary">{{ oferta.get_modalidad_display }}</span>
                <span class="badge badge-success">{{ oferta.get_tipo_contrato_display }}</span>
            </div>

            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; font-size: 0.875rem; color: var(--text);">
                <span>üìç {{ oferta.ubicacion }}</span>
            </div>

            {% if oferta.salario_min and oferta.salario_max %}
            <p class="fw-bold text-primary" style="margin-bottom: 1rem;">
                {{ oferta.moneda }} {{ oferta.salario_min }} - {{ oferta.salario_max }}
            </p>
            {% endif %}

            <div style="display: flex; gap: 0.5rem; font-size: 0.875rem; color: #6b7280; margin-bottom: 1rem;">
                <span>üëÅÔ∏è {{ oferta.vistas }} vistas</span>
                <span>‚Ä¢</span>
                <span>{{ oferta.fecha_publicacion|timesince }} atr√°s</span>
            </div>

            <a href="{% url 'oferta_detalle' oferta.id %}" class="btn btn-primary" style="width: 100%;">
                Ver Detalles
            </a>
        </div>
        {% empty %}
        <div class="card" style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <p class="text-muted">No hay ofertas disponibles en este momento</p>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-3">
        <a href="{% url 'ofertas_lista' %}" class="btn btn-primary">Ver Todas las Ofertas</a>
    </div>
</div>

<!-- CTA Section -->
<section style="background: var(--light); padding: 4rem 2rem; margin-top: 3rem;">
    <div class="container" style="text-align: center;">
        <h2 style="margin-bottom: 1rem;">¬øEres una empresa?</h2>
        <p style="font-size: 1.125rem; color: var(--text); margin-bottom: 2rem;">
            Publica tus ofertas de trabajo y encuentra al candidato perfecto
        </p>
        {% if user.is_authenticated %}
            {% if user.tipo_usuario == 'empleador' %}
                <a href="{% url 'crear_oferta' %}" class="btn btn-primary" style="font-size: 1.125rem; padding: 0.75rem 2rem;">
                    Publicar Oferta
                </a>
            {% else %}
                <a href="{% url 'ofertas_lista' %}" class="btn btn-primary" style="font-size: 1.125rem; padding: 0.75rem 2rem;">
                    Buscar Empleos
                </a>
            {% endif %}
        {% else %}
            <a href="{% url 'register' %}" class="btn btn-primary" style="font-size: 1.125rem; padding: 0.75rem 2rem;">
                Registrar mi Empresa
            </a>
        {% endif %}
    </div>
</section>

<style>
    .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    @media (max-width: 768px) {
        section h1 {
            font-size: 2rem !important;
        }

        section form {
            flex-direction: column;
        }

        .stats {
            grid-template-columns: 1fr 1fr !important;
        }
    }
</style>
{% endblock %}
